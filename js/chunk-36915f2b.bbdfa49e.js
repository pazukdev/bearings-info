(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36915f2b"],{"0966":function(e,t,i){},"1c65":function(e,t,i){},4724:function(e,t,i){"use strict";var s=i("0966"),r=i.n(s);r.a},"58cf":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ReplacerList",{on:{"show-add-form":e.showAddForm}}),i("AddReplacerForm",{attrs:{"show-form":e.showForm},on:{"hide-add-form":e.hideAddForm}})],1)},r=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"text-align":"center"}},[i("DeletedItemsList",{attrs:{array:e.getDeletedItems()},on:{restore:e.restore}}),i("p",{staticClass:"green"},[e._v(e._s(e.translate(e.message)))]),e.loading?i("LoadingScreen"):i("div",[i("table",{staticStyle:{"text-align":"center"},attrs:{id:"replacers-table"}},[i("tbody",e._l(e.sortedReplacers(),function(t){return i("tr",{staticStyle:{"text-align":"left"}},[i("td",{staticClass:"bordered"},[i("table",[i("tbody",[e.editMode?i("tr",[i("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"2"}},[i("ButtonDelete",{staticStyle:{display:"inline-block"},attrs:{item:t,"item-view-prop":!0},on:{"remove-item":e.removeItem}})],1)]):e._e(),i("tr",[i("td",{staticClass:"not-symmetrical-left"},[i("ButtonNavigateToItem",{attrs:{part:t}})],1),i("td",{staticStyle:{"text-align":"right"}},[i("button",{staticClass:"round-button",attrs:{type:"button",title:e.getLikeTitle(t,!0)},on:{click:function(i){return e.rate(t,"like")}}},[i("i",{class:{"fa fa-thumbs-up":!0,green:e.isLiked(t)}})]),i("span",{class:{green:e.isColored(e.getLikedUsers(t).length)}},[e._v("\n                                "+e._s(e.getLikedUsers(t).length)+"\n                            ")]),i("button",{staticClass:"round-button",attrs:{type:"button",title:e.getLikeTitle(t,!1)},on:{click:function(i){return e.rate(t,"dislike")}}},[i("i",{class:{"fa fa-thumbs-down":!0,red:e.isDisliked(t)}})]),i("span",{class:{red:e.isColored(e.getDislikedUsers(t).length)}},[e._v("\n                                "+e._s(0-e.getDislikedUsers(t).length)+"\n                            ")])])]),i("tr",[i("td",{attrs:{colspan:"4"}},[e.editMode?e._e():i("p",{staticStyle:{"text-align":"left"}},[e._v(e._s(t.comment))]),e.editMode?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"item.comment"}],domProps:{value:t.comment},on:{input:function(i){i.target.composing||e.$set(t,"comment",i.target.value)}}}):e._e()])])])])])])}),0)])])],1)},a=[],o=(i("55dd"),i("cebc")),l=i("bc3a"),c=i.n(l),d=i("2f62"),m=i("11d9"),u=i("74ca"),h=i("159e"),f=i("6924"),g=i("99f2"),p=i("b195"),v=i("d3b0"),b=i("6e8a"),w={name:"ReplacerList",components:{LoadingScreen:b["default"],DeletedItemsList:p["a"],ButtonDelete:h["a"],ButtonNavigateToItem:u["a"]},mixins:[f["a"],g["a"]],computed:Object(o["a"])({},Object(d["b"])({countries:function(e){return e.dictionary.countries}})),data:function(){return{message:"",loading:!1}},watch:{$route:"onUrlChange"},methods:{onUrlChange:function(){this.loading=!1},getLikeTitle:function(e,t){var i=this.isDisliked(e)?"Cancel":"Dislike";t&&(i=this.isLiked(e)?"Cancel":"Like"),i=this.translate(i);var s="",r=t?this.getLikedUsers(e):this.getDislikedUsers(e);if(0===r.length)return i;for(var n=0;n<r.length;n++){var a=r[n].comment,o=this.getCountryName(a),l=this.isEmpty(o)?"":" "+this.translate("from")+" "+this.translate(o);s+=r[n].itemName+l+"\n"}return i+"\n- - - - -\n"+s},getCountryName:function(e){return m["a"].getCountryName(e)},getLikedUsers:function(e){return e.likedUsers},getDislikedUsers:function(e){return e.dislikedUsers},isColored:function(e){return e>0},sortedReplacers:function(){var e=this;return this.getItems().slice().sort(function(t,i){var s=e.getLikedUsers(t).length-e.getDislikedUsers(t).length,r=e.getLikedUsers(i).length-e.getDislikedUsers(i).length;return s<r?1:-1})},getItems:function(){return this.itemView.replacersTable.replacers},getDeletedItems:function(){return this.itemView.deletedReplacers},isRated:function(e){return this.isLiked(e)||this.isDisliked(e)},isLiked:function(e){return v["a"].isInArrayById(this.userData.id,this.getLikedUsers(e))},isDisliked:function(e){return v["a"].isInArrayById(this.userData.id,this.getDislikedUsers(e))},rate:function(e,t){var i=this;if(this.isGuest())this.message="To rate the replacer, please log in";else{this.loading=!0;var s="cancel",r=this.isLiked(e)?s:"up";m["a"].isEmpty(t)||"dislike"!==t.toLowerCase()||(r=this.isDisliked(e)?s:"down");var n={action:r,itemId:e.itemId,replacers:this.getItems()};c.a.put(this.basicUrl+"/replacer/rate/"+this.getUserName(),n,{headers:{Authorization:this.authorization}}).then(function(e){var t=e.data;i.itemView.replacersTable.replacers=t.replacers,i.itemView.cachedViews=t.cachedViews,i.userData.rating=t.newUserRating,console.log("Replacer rate action performed: user name: "+i.getUserName()+", action: "+n.action+", item id: "+n.itemId),i.loading=!1})}},removeItem:function(e){this.getDeletedItems().push(e),m["a"].removeFromArray(e,this.getItems()),this.$emit("show-add-form")},restore:function(e){this.getItems().push(e),m["a"].removeFromArray(e,this.getDeletedItems())}}},y=w,I=(i("4724"),i("2877")),k=Object(I["a"])(y,n,a,!1,null,"56fe57d3",null),C=k.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.editMode?i("div",[e.showMessage?i("p",{staticClass:"alert-message"},[e._v("\n        "+e._s(e.translate(e.message))+"\n    ")]):e._e(),e.showAddForm?i("table",[i("tbody",[i("tr",[i("td",[i("table",{staticClass:"bordered"},[i("tbody",[i("tr",[i("td",{staticClass:"not-symmetrical-left",staticStyle:{"text-align":"left"}},[e._v("\n                            "+e._s(e.translate("Add replacer"))+"\n                        ")]),i("td",{staticStyle:{"text-align":"right"}},[e.isEmpty(e.item)?e._e():i("ButtonAdd",{on:{"add-item":e.addItem}})],1)]),i("tr",[i("td",[i("ItemSelect",{attrs:{replacer:!0},on:{"hide-add-form":e.hideAddForm,"on-change":e.itemSelectOnChange}})],1),i("td")]),i("tr",[i("td",{attrs:{colspan:"2"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.itemComment,expression:"itemComment"}],domProps:{value:e.itemComment},on:{input:function(t){t.target.composing||(e.itemComment=t.target.value)}}})])])])])])])])]):e._e()]):e._e()},L=[],A=i("98be"),x=i("f9b6"),D=i("60bf"),U={name:"AddReplacerForm",components:{ButtonAdd:x["a"],ItemSelect:A["a"]},props:{showForm:Boolean},computed:Object(o["a"])({},Object(d["b"])({itemView:function(e){return e.dictionary.itemView},editMode:function(e){return e.dictionary.editMode}}),{message:function(){return this.showForm?"":"No possible replacers found"},showMessage:function(){return!m["a"].messageIsEmpty(this.message)},showAddForm:function(){return this.editMode&&this.showForm}}),data:function(){return{item:"",itemComment:""}},methods:{hideAddForm:function(){this.$emit("hide-add-form")},addItem:function(){this.item.type="replacer",this.item.comment=this.itemComment;var e=this.item;e.quantity="-",this.itemView.replacersTable.replacers.push(e),this.item="",this.itemComment=""},itemSelectOnChange:function(e){this.item=e},translate:function(e){return D["a"].translate(e)},isEmpty:function(e){return m["a"].isEmpty(e)}}},F=U,S=(i("be86"),Object(I["a"])(F,_,L,!1,null,"6888c15a",null)),R=S.exports,T={name:"ReplacersSection",components:{ReplacerList:C,AddReplacerForm:R},data:function(){return{showForm:!0}},methods:{showAddForm:function(){this.showForm=!0},hideAddForm:function(){this.showForm=!1}}},V=T,N=Object(I["a"])(V,s,r,!1,null,"0eb640e0",null);t["default"]=N.exports},"98be":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedItem,expression:"selectedItem"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedItem=t.target.multiple?i:i[0]},e.onChange]}},e._l(e.getActualPossibleItemsList(),function(t){return i("option",{domProps:{value:t}},[e._v("\n                "+e._s(t.selectText)+"\n            ")])}),0)])},r=[],n=i("2843"),a=i("d3b0"),o=i("6924"),l=i("99f2"),c={name:"ItemSelect",props:{replacer:Boolean},mixins:[o["a"],l["a"]],data:function(){return{selectedItemMessage:"",selectedItem:""}},methods:{getActualPossibleItemsList:function(){var e,t,i;this.replacer?(e=this.itemView.possibleReplacers,t=this.itemView.deletedReplacers,i=this.itemView.replacersTable.replacers.slice()):(e=this.itemView.possibleParts,t=this.itemView.deletedChildren,i=this.itemView.children.slice()),!this.isEmpty(t)&&t.length>0&&(i=i.concat(t));for(var s=[],r=0;r<e.length;r++){var o=e[r];this.isInList(o,i)||(o.selectText=a["a"].createSelectText(o),s.push(o))}return s.length<1&&this.$emit("hide-add-form"),n["a"].sortBySelectText(s)},isInList:function(e,t){for(var i=0;i<t.length;i++)if(t[i].itemId===e.itemId)return!0;return!1},onChange:function(){this.$emit("on-change",this.selectedItem)}}},d=c,m=i("2877"),u=Object(m["a"])(d,s,r,!1,null,"1e25426c",null);t["a"]=u.exports},be86:function(e,t,i){"use strict";var s=i("1c65"),r=i.n(s);r.a},d3b0:function(e,t,i){"use strict";i("a481");var s=i("11d9"),r=i("60bf");t["a"]={translate:function(e){return r["a"].translate(e)},createSelectText:function(e){var t=e.itemCategory,i=this.isAddManufacturer(e,e.manufacturer,!0),s=this.translate(e.itemName),r=this.translate(e.manufacturer),n=s;return"seal"===t.toLowerCase()?n=e.size+" "+(i?r+" ":"")+s:i&&(n=r+" "+s),this.translate(t)+" "+n},isAddManufacturer:function(e,t,i){if(s["a"].isEmpty(t)||"ussr"===t.toLowerCase())return!1;if(i)return!0;var r=e.itemName;if(r===t+r.replace(t,"")||r===r.replace(t,"")+t)return!1;var n=e.itemCategory;return"seal"===n.toLowerCase()||"spark plug"===n.toLowerCase()},isInArrayById:function(e,t){for(var i=0;i<t.length;i++)if(t[i].itemId===e)return!0;return!1}}}}]);
//# sourceMappingURL=chunk-36915f2b.bbdfa49e.js.map